(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{315:function(e,t,i){"use strict";i.r(t);var n=i(317),o=i(318),s=i.n(o);function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var r=Math.PI/2,h=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.object=t,this.enabled=!0,this.movementSpeed=50,this.lookSpeedX=30,this.lookSpeedY=30,this.minY=Number.NEGATIVE_INFINITY,this.maxY=Number.POSITIVE_INFINITY,this.pitch=new n.e,this.yaw=new n.e,this.yaw.add(this.pitch),this.pitch.add(this.object),this.mouseDown=!1,this.moveForward=!1,this.moveBackward=!1,this.moveLeft=!1,this.moveRight=!1,this.moveUp=!1,this.moveDown=!1,this.pitchUp=!1,this.pitchDown=!1,this.yawLeft=!1,this.yawRight=!1,this.velocity=new n.m,this.direction=new n.m,this.onMouseMove=this.onMouseMove.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.onKeyUp=this.onKeyUp.bind(this),document.addEventListener("mousemove",this.onMouseMove,!1),document.addEventListener("mouseup",this.onMouseUp,!1),document.addEventListener("mousedown",this.onMouseDown,!1),document.addEventListener("keyup",this.onKeyUp,!1),document.addEventListener("keydown",this.onKeyDown,!1)}var t,i,o;return t=e,(i=[{key:"getObject",value:function(){return this.yaw}},{key:"dispose",value:function(){document.removeEventListener("mousemove",this.onMouseMove,!1),document.removeEventListener("mouseup",this.onMouseUp,!1),document.removeEventListener("mousedown",this.onMouseDown,!1),document.removeEventListener("keyup",this.onKeyUp,!1),document.removeEventListener("keydown",this.onKeyDown,!1)}},{key:"onMouseMove",value:function(e){if(!this.enabled||!this.mouseDown)return!1;var t=e.movementX||e.mozMovementX||e.webkitMovementX||0,i=e.movementY||e.mozMovementY||e.webkitMovementY||0;this.yaw.rotation.y-=t*this.lookSpeedX/1e4,this.pitch.rotation.x-=i*this.lookSpeedY/1e4,this.pitch.rotation.x=Math.max(-r,Math.min(r,this.pitch.rotation.x))}},{key:"onMouseUp",value:function(e){this.mouseDown=!1}},{key:"onMouseDown",value:function(e){this.mouseDown=!0}},{key:"onKeyDown",value:function(e){switch(e.keyCode){case 16:this.shiftKey=!0;break;case 38:case 87:this.moveForward=!0;break;case 37:case 65:this.moveLeft=!0;break;case 40:case 83:this.moveBackward=!0;break;case 39:case 68:this.moveRight=!0;break;case 81:this.moveUp=!0;break;case 69:this.moveDown=!0;break;case 73:this.pitchUp=!0;break;case 75:this.pitchDown=!0;break;case 74:this.yawLeft=!0;break;case 76:this.yawRight=!0}}},{key:"onKeyUp",value:function(e){switch(event.keyCode){case 16:this.shiftKey=!1;break;case 38:case 87:this.moveForward=!1;break;case 37:case 65:this.moveLeft=!1;break;case 40:case 83:this.moveBackward=!1;break;case 39:case 68:this.moveRight=!1;break;case 81:this.moveUp=!1;break;case 69:this.moveDown=!1;break;case 73:this.pitchUp=!1;break;case 75:this.pitchDown=!1;break;case 74:this.yawLeft=!1;break;case 76:this.yawRight=!1}}},{key:"update",value:function(e){if(this.velocity.x-=10*this.velocity.x*e,this.velocity.z-=10*this.velocity.z*e,this.direction.z=Number(this.moveForward)-Number(this.moveBackward),this.direction.x=Number(this.moveLeft)-Number(this.moveRight),this.direction.normalize(),(this.moveForward||this.moveBackward)&&(this.velocity.z-=this.direction.z*this.movementSpeed*e),(this.moveLeft||this.moveRight)&&(this.velocity.x-=this.direction.x*this.movementSpeed*e),(this.pitchUp||this.pitchDown)&&(this.pitch.rotation.x-=(Number(this.pitchDown)-Number(this.pitchUp))*this.lookSpeedY/1e3,this.pitch.rotation.x=Math.max(-r,Math.min(r,this.pitch.rotation.x))),(this.yawLeft||this.yawRight)&&(this.yaw.rotation.y-=(Number(this.yawRight)-Number(this.yawLeft))*this.lookSpeedX/1e3),this.yaw.translateX(this.velocity.x*e),this.yaw.translateZ(this.velocity.z*e),this.moveUp||this.moveDown){var t=(Number(this.moveUp)-Number(this.moveDown))/25;this.object.position.y=Math.max(this.minY,Math.min(this.maxY,this.object.position.y-t))}}}])&&a(t.prototype,i),o&&a(t,o),e}();function c(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.app=t,this.keyPress={},this.camPosition=new n.m(0,0,0)}var t,o,a;return t=e,(o=[{key:"init",value:function(){this.scene=new n.g,this.camera=new n.f(60,window.innerWidth/window.innerHeight,.001,100),this.camera.position.z=0,this.renderer=new n.n({antialias:!0,alpha:!0}),this.clock=new n.b,this.controls=new h(this.camera),this.scene.add(this.controls.getObject());var e=new n.i(1,512,256),t=(new n.k).load("/default.jpg");t.needsUpdate=!0,t.minFilter=n.c,this.material=new n.h({uniforms:{texture_hemisphere:{type:"t",value:t},resolution:{type:"vec2",value:new n.l}},vertexShader:s()(i(319)),fragmentShader:s()(i(320))}),this.material.side=n.a,this.object3D=new n.d(e,this.material),this.scene.add(this.object3D)}},{key:"updateTexture",value:function(){var e=document.getElementById("image"),t=new n.j(e);t.needsUpdate=!0,t.minFilter=n.c,this.material.uniforms.texture_hemisphere.value=t}},{key:"update",value:function(){var e=this.clock.getDelta();this.controls.update(e/10)}},{key:"draw",value:function(){this.renderer.render(this.scene,this.camera)}},{key:"resize",value:function(e,t){this.renderer&&(this.camera.aspect=e/t,this.camera.updateProjectionMatrix(),this.fovHeight=2*Math.tan(this.camera.fov*Math.PI/180/2)*this.camera.position.z,this.fovWidth=this.fovHeight*this.camera.aspect,this.renderer.setSize(e,t),this.material.uniforms.resolution.value.x=e,this.material.uniforms.resolution.value.y=t)}},{key:"keyup",value:function(e){this.keyPress[e]=!1}},{key:"keydown",value:function(e){this.keyPress[e]=!0}}])&&c(t.prototype,o),a&&c(t,a),e}();function v(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}i.d(t,"default",(function(){return d}));var d=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.el=document.querySelector(".container")}var t,i,n;return t=e,(i=[{key:"init",value:function(){this.webgl=new u(this),this.webgl.init(),this.el.appendChild(this.webgl.renderer.domElement),this.addListeners(),this.animate(),this.resize()}},{key:"addListeners",value:function(){var e=this;this.handlerAnimate=this.animate.bind(this),window.addEventListener("resize",this.resize.bind(this)),window.addEventListener("keyup",this.keyup.bind(this)),window.addEventListener("keydown",this.keydown.bind(this)),window.addEventListener("load",(function(){document.querySelector('input[type="file"]').addEventListener("change",(function(t){if(t.target.files&&t.target.files[0]){var i=document.getElementById("image");i.src=URL.createObjectURL(t.target.files[0]),i.onload=e.webgl.updateTexture.bind(e.webgl),console.log(i)}}))}))}},{key:"animate",value:function(){var e=this;this.webgl.renderer.setAnimationLoop((function(){e.update(),e.draw()}))}},{key:"update",value:function(){this.webgl&&this.webgl.update()}},{key:"draw",value:function(){this.webgl&&this.webgl.draw()}},{key:"resize",value:function(){var e=document.querySelector(".container").offsetWidth||window.innerWidth,t=document.querySelector(".container").offsetHeight||window.innerHeight;this.webgl&&this.webgl.resize(e,t)}},{key:"keyup",value:function(e){this.webgl&&this.webgl.keyup(e.keyCode)}},{key:"keydown",value:function(e){this.webgl&&this.webgl.keydown(e.keyCode)}}])&&v(t.prototype,i),n&&v(t,n),e}()},319:function(e,t){e.exports="#define GLSLIFY 1\n#define PI 3.1415926535\nvarying vec2 vUv;\nvarying vec3 vPosition;\nuniform sampler2D texture_depth;\n\nvec2 uv_hemisphere(vec3 dir) {\n    vec2 uv;\n\tuv.x = PI + atan( dir.z, dir.x );\n\tuv.y = PI - acos( dir.y );\n\tuv /= vec2( PI*2.0, PI );\n\treturn uv;\n}\n\nvoid main() {\n\tvUv = uv;\n\tvPosition = position;\n  \tvec4 depth = texture2D(texture_depth, uv_hemisphere(normalize(position)));\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4(depth.x * normalize(position), 1.0);\n}\n"},320:function(e,t){e.exports="#define GLSLIFY 1\n#define PI 3.1415926535\n#define K 7\nuniform sampler2D texture_hemisphere;\nuniform vec2 resolution;\nvarying vec2 vUv;\nvarying vec3 vPosition;\n\nvec2 uv_hemisphere(vec3 dir) {\n    vec2 uv;\n\tuv.x = PI + atan(dir.z, dir.x);\n\tuv.y = PI - acos( dir.y );\n\tuv /= vec2( PI*2.0, PI );\n\treturn uv;\n}\n\nvoid main() {\n    vec3 dir = normalize(vPosition);\n    gl_FragColor = texture2D(texture_hemisphere, uv_hemisphere(dir));\n}"}}]);